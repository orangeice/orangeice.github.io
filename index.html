<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://yoursite.com">
  <title>Chen bin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="天下事有难易乎？为之，则难者亦易矣；不为，则易者亦难矣。">
<meta property="og:type" content="website">
<meta property="og:title" content="Chen bin">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Chen bin">
<meta property="og:description" content="天下事有难易乎？为之，则难者亦易矣；不为，则易者亦难矣。">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chen bin">
<meta name="twitter:description" content="天下事有难易乎？为之，则难者亦易矣；不为，则易者亦难矣。">
  
    <link rel="alternative" href="/atom.xml" title="Chen bin" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/main.css">
  

</head>

<body>
  <div id="container">
    <div class="left-col">
      <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="http://ww1.sinaimg.cn/mw690/9c310acfjw1f9xix0ibtvj20qo0xbgp5.jpg" class="js-avatar show">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">陈彬</a></h1>
		</hgroup>

		
		<p class="header-subtitle">天下事有难易乎？为之，则难者亦易矣；不为，则易者亦难矣。</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/tags/随笔">随笔</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a class="js-smart-menu" data-idx="0" href="javascript:void(0)">所有文章</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="1" href="javascript:void(0)">标签</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="2" href="javascript:void(0)">关于我</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/orangeice" title="github">github</a>
		        
					<a class="weibo" target="_blank" href="http://weibo.com/2620459727/profile?rightmod=1&wvr=6&mod=personinfo" title="weibo">weibo</a>
		        
					<a class="mail" target="_blank" href="/15249997147@163.com" title="mail">mail</a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-list"></i></div>
  		<h1 class="header-author js-mobile-header hide">陈彬</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img src="http://ww1.sinaimg.cn/mw690/9c310acfjw1f9xix0ibtvj20qo0xbgp5.jpg" class="js-avatar">
				
			</div>
			<hgroup>
			  <h1 class="header-author">陈彬</h1>
			</hgroup>
			
			<p class="header-subtitle">天下事有难易乎？为之，则难者亦易矣；不为，则易者亦难矣。</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/tags/随笔">随笔</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/orangeice" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/2620459727/profile?rightmod=1&wvr=6&mod=personinfo" title="weibo">weibo</a>
			        
						<a class="mail" target="_blank" href="/15249997147@163.com" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
        
  
    <article id="post-Swift-从零开始-12-Swift和H5的交互" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/30/Swift-从零开始-12-Swift和H5的交互/">Swift 从零开始 12_Swift和H5的交互</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <font color="OrangeRed" size="4">本文主要讲述项目中用到的一套交互机制,方法很多,欢迎交流</font>

<h3 id="首先-用的WkWebView"><a href="#首先-用的WkWebView" class="headerlink" title="首先,用的WkWebView"></a>首先,用的WkWebView</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">CBWebView</span>: <span class="title">WKScriptMessageHandler</span> </span>&#123;</div><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">userContentController</span><span class="params">(userContentController: WKUserContentController, didReceiveScriptMessage message: WKScriptMessage)</span></span> &#123;</div><div class="line">    </div><div class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> _handleViewController = handleViewController <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</div><div class="line">    </div><div class="line">    <span class="comment">//接受h5那边发过来的消息,消息存放在message的body中</span></div><div class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> cmd = <span class="type">Cmd</span>.create(with: message.body <span class="keyword">as</span>! <span class="type">String</span>) <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</div><div class="line">    </div><div class="line">    <span class="type">CMDManager</span>.sharedInstance.performCmd(_handleViewController, cmd: cmd)</div><div class="line">    </div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="cmd是自定义的存放消息的类"><a href="#cmd是自定义的存放消息的类" class="headerlink" title="cmd是自定义的存放消息的类"></a>cmd是自定义的存放消息的类</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">class <span class="keyword">Cmd</span><span class="bash"> &#123;</span></div><div class="line">  class func create(with text: String) -&gt; <span class="keyword">Cmd</span><span class="bash">? &#123;</span></div><div class="line">  </div><div class="line">    if let json = JSON.createFromString(text) &#123;</div><div class="line">      </div><div class="line">      let <span class="keyword">cmd</span><span class="bash"> = Cmd()</span></div><div class="line">      <span class="keyword">cmd</span>.<span class="bash">action = json[<span class="string">"cmd"</span>].stringValue</span></div><div class="line">      <span class="keyword">cmd</span>.<span class="bash">params = json[<span class="string">"data"</span>]</span></div><div class="line">      </div><div class="line">      return <span class="keyword">cmd</span><span class="bash"></span></div><div class="line">    &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<h3 id="CMDManager是oc方法的管理类"><a href="#CMDManager是oc方法的管理类" class="headerlink" title="CMDManager是oc方法的管理类"></a>CMDManager是oc方法的管理类</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CMDManager</span>: <span class="title">NSObject</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> currentCmdAction: <span class="type">String</span>!</div><div class="line">  <span class="keyword">var</span> currentCmdParams: <span class="type">JSON</span>!</div><div class="line">  <span class="keyword">weak</span> <span class="keyword">var</span> currentViewController: <span class="type">UIViewController</span>!</div><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">performCmd</span><span class="params">(handleViewController: UIViewController, cmd: Cmd)</span></span> &#123;</div><div class="line">    </div><div class="line">    currentCmdAction = cmd.action</div><div class="line">    currentViewController = handleViewController</div><div class="line">    currentCmdParams = cmd.params</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> respondsToSelector(<span class="type">Selector</span>(currentCmdAction)) &#123;</div><div class="line">      </div><div class="line">      performSelector(<span class="type">Selector</span>(currentCmdAction))</div><div class="line">      <span class="type">DDLogVerbose</span>(<span class="string">"cmd: <span class="subst">\(cmd.action)</span>, params: <span class="subst">\(<span class="keyword">self</span>.currentCmdParams.rawString()</span> ?? "</span><span class="string">")"</span>)</div><div class="line">      </div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      </div><div class="line">      <span class="type">DDLogWarn</span>(<span class="string">"<span class="subst">\(cmd.action)</span> has not be implement"</span>)</div><div class="line">      </div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<font color="OrangeRed" size="4">通过上面三段代码就可以知道:<br>h5发送消息到WKScriptMessageHandler的Message中,然后将消息体(message.body存到到cmd中,对应的action和params).然后再调用CMDManager的performCmd方法,将cmd传过来,然后通过respondsToSelector 方法判断该类中是否实现了对面方法(cmd.action),实现了就可以调用,没有实现则提示.</font>

<h3 id="比如h5加载时-调用oc的hide-loading方法"><a href="#比如h5加载时-调用oc的hide-loading方法" class="headerlink" title="比如h5加载时,调用oc的hide_loading方法"></a>比如h5加载时,调用oc的hide_loading方法</h3><h4 id="通过h5的文档-知道方法名及参数-然后自己把方法实现即可"><a href="#通过h5的文档-知道方法名及参数-然后自己把方法实现即可" class="headerlink" title="通过h5的文档,知道方法名及参数,然后自己把方法实现即可."></a>通过h5的文档,知道方法名及参数,然后自己把方法实现即可.</h4><font color="OrangeRed" size="4">这里是h5调用oc的方法,并且没有回调</font>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//隐藏加载页面</span></div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">hide_loading</span> <span class="params">()</span></span> &#123;</div><div class="line">    <span class="comment">//调用CBWebView 的 hideLoadView()方法</span></div><div class="line">    (currentViewController <span class="keyword">as</span>? <span class="type">FruitViewController</span> )?.webView.hideLoadView()</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<font color="OrangeRed" size="4">下面说说h5调用oc方法之后,还要回调h5方法的例子</font>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//获取app的数据</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">get_app_data</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="comment">//callbackName和callbackID是参数,通过cmd.params传过来的</span></div><div class="line">    <span class="keyword">let</span> callbackName = <span class="keyword">self</span>.currentCmdParams[<span class="string">"callbackName"</span>].stringValue</div><div class="line">    <span class="keyword">let</span> callbackID = <span class="keyword">self</span>.currentCmdParams[<span class="string">"callbackID"</span>].intValue</div><div class="line">    <span class="keyword">let</span> loginInfo : <span class="type">LoginInfo</span></div><div class="line">    loginInfo = <span class="type">InfoManager</span>.sharedInstance.readLoginInfo()!</div><div class="line">    </div><div class="line">    <span class="comment">//回调h5方法</span></div><div class="line">    (<span class="keyword">self</span>.currentViewController <span class="keyword">as</span>? <span class="type">FruitViewController</span>)?.webView.getAppData(callbackName, callbackID: callbackID, loginInfo: loginInfo)</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>然后在CBWebView的Extension(新建一个类叫 WebViewExtension)中实现oc调用js的代码</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//这是WkWebView种调用js方法的方法</span></div><div class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">perfromJs</span><span class="params">(method:String,param1:String,param2:String, completionHandler: <span class="params">(<span class="params">(Any?, NSError?)</span></span></span></span> -&gt; <span class="type">Void</span>)?) </div><div class="line">  &#123;</div><div class="line">    <span class="keyword">self</span>.evaluateJavaScript(<span class="string">"<span class="subst">\(method)</span>('<span class="subst">\(param1)</span>','<span class="subst">\(param2)</span>')"</span>, completionHandler: completionHandler)</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//回调方法</span></div><div class="line"><span class="comment">//回调参数(callbackID,&#123;uid:”10000”,”auth”:” asdasdasd213”&#125;)</span></div><div class="line"> <span class="function"><span class="keyword">func</span> <span class="title">getAppData</span><span class="params">(callbackName: String, callbackID: Int,loginInfo: LoginInfo)</span></span> &#123;</div><div class="line">   <span class="keyword">var</span> str1 = <span class="string">""</span></div><div class="line">   <span class="keyword">var</span> str2 = <span class="string">""</span></div><div class="line">   </div><div class="line">   str1 = <span class="string">"<span class="subst">\(callbackID)</span>"</span></div><div class="line">   str2 = <span class="string">"&#123;\"uid\":\"<span class="subst">\(loginInfo.uid)</span>\",\"auth\":\"<span class="subst">\(loginInfo.auth)</span>\"&#125;"</span></div><div class="line">   </div><div class="line">   <span class="built_in">print</span>(<span class="string">"str------<span class="subst">\(str1 + str2)</span>"</span>)</div><div class="line">   perfromJs(callbackName, param1:str1, param2:str2) &#123; (obj, err) <span class="keyword">in</span></div><div class="line">     <span class="built_in">print</span>(err)</div><div class="line">   &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<font color="OrangeRed" size="4">至此,swift中和h5的互调完成,整个逻辑其实很简单,主意和h5开发人员沟通好就行!</font>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/11/30/Swift-从零开始-12-Swift和H5的交互/" class="archive-article-date">
  	<time datetime="2016-11-30T03:02:37.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-11-30</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift-h5交互/">swift h5交互</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-测试" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/30/测试/">删除字符串中相同的字符</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="删除字符串中相同的字符"><a href="#删除字符串中相同的字符" class="headerlink" title="删除字符串中相同的字符"></a>删除字符串中相同的字符</h1><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>项目中服务器请求回来的一个字符串中有相同的情况,如str = @”4303,4305,4306,4303,4307”,需要将其中一个4303去掉</p>
<h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><ol>
<li><p>现将字符串截取处理,截取完成后是用一个数组来接收;</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NSArray *listStrs = [<span class="keyword">str</span> componentsSeparatedByString:@<span class="string">","</span>];</div></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>将数组中多余的数据筛选出来,有多种方法</p>
<ul>
<li><p>利用NSDictionary的AllKeys,通过对数组中的数据赋值,相同的值只会赋值一次</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">NSMutableDictionary *dict = [[NSMutableDictionary 	alloc] initWithCapacity: <span class="type">0</span>];</div><div class="line"></div><div class="line"><span class="keyword">for</span>(NSString *<span class="keyword">new</span><span class="type">Str</span> <span class="keyword">in</span> listStrs)</div><div class="line">   &#123;</div><div class="line">       [dict setValue: <span class="type">newStr forKey</span>: <span class="keyword">new</span><span class="type">Str</span>];</div><div class="line">   &#125;</div><div class="line">``` </div><div class="line"></div><div class="line">- 利用NSSet的AllObjects</div></pre></td></tr></table></figure>
<p>NSSet *set = [NSSet setWithArray: listStrs];</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="bullet">- </span>利用NSArray的containsObjects</div></pre></td></tr></table></figure>
<p>NSMutableArray <em>listArr = [[NSMutableArray alloc]init];<br>for (NSString </em> newStr in listStrs) {<br>  if (![listArr containsObject: newStr]) {</p>
<pre><code>[listArr addObject: newStr];
</code></pre><p>  }<br>}    </p>
 <figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">   	</div><div class="line"><span class="bullet">3. </span>将新的数据拼接起来</div></pre></td></tr></table></figure>
</li>
</ul>
<p>str = [listArr componentsJoinedByString:@”,”];<br>```</p>
</li>
</ol>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/11/30/测试/" class="archive-article-date">
  	<time datetime="2016-11-30T02:58:44.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-11-30</time>
</a>
      
      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/OC/">OC</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-IOS开发实用小技巧-持续更新" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/30/IOS开发实用小技巧-持续更新/">IOS开发实用小技巧(持续更新)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <font color="OrangeRed" size="4">1.设置电池栏</font>

<figure class="highlight http"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">didFinishLaunchingWithOptions</span>: </div><div class="line"></div><div class="line"><span class="objectivec"><span class="comment">//MARK :-设置电池栏(状态栏)</span></span></div><div class="line">    <span class="comment">//设置颜色</span></div><div class="line">    application.statusBarStyle = <span class="built_in">UIStatusBarStyleLightContent</span>;</div><div class="line">    <span class="comment">//启动时隐藏</span></div><div class="line">    application.statusBarHidden = <span class="literal">NO</span>;</div></pre></td></tr></table></figure>
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/11/30/IOS开发实用小技巧-持续更新/" class="archive-article-date">
  	<time datetime="2016-11-30T01:55:18.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-11-30</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ios/">ios</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-Swift-从零开始-11-多文件下载及存到沙盒" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/30/Swift-从零开始-11-多文件下载及存到沙盒/">Swift 从零开始 11_多文件下载及存到沙盒</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <font color="OrangeRed" size="3">本文主要说说,App第一次启动时,去下载一些数据保存到沙盒该如何实现.<br>这里用的是ios7后新出的NSUrlSession</font>

<font color="LightSalmon" size="3">先看代码</font>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">downloadGameAudioWithUrl</span><span class="params">(urlStr: String)</span></span> &#123;</div><div class="line"></div><div class="line">	<span class="comment">// 1. URL</span></div><div class="line">    <span class="keyword">let</span> url = <span class="type">NSURL</span>(string: urlStr)</div><div class="line">    <span class="keyword">let</span> request = <span class="type">NSURLRequest</span>(<span class="type">URL</span>: url!)</div><div class="line">    </div><div class="line">    <span class="comment">// 2. 自定义session,需要设置代理</span></div><div class="line">    <span class="comment">// 选择默认配置信息</span></div><div class="line">    <span class="keyword">let</span> config = <span class="type">NSURLSessionConfiguration</span>.defaultSessionConfiguration()</div><div class="line">    <span class="keyword">let</span> downloadSession = <span class="type">NSURLSession</span>(configuration:</div><div class="line">      config, delegate: <span class="keyword">self</span>, delegateQueue: <span class="literal">nil</span>)</div><div class="line">    </div><div class="line">     <span class="comment">// 3. 发起下载任务(在这里回调里面,就可以对下载好的文件进行处理)</span></div><div class="line">    <span class="keyword">let</span> downloadTask = downloadSession.downloadTaskWithRequest(request) &#123; (location, response, error) <span class="keyword">in</span></div><div class="line">    </div><div class="line">     <span class="comment">// 下载的位置,沙盒中tmp目录中的临时文件,会被及时删除</span></div><div class="line">      <span class="built_in">print</span>(<span class="string">"文件下载路径: <span class="subst">\(location.path)</span>"</span>)</div><div class="line">    </div><div class="line">     <span class="comment">/*</span></div><div class="line">      document       备份,下载的文件不能放在此文件夹中 </div><div class="line">      cache          缓存的,不备份,重新启动不会被清空,如果缓存内容过多,可以考虑新建一条线程检查缓存目录中的文件大小,自动清理缓存,给用户节省控件 </div><div class="line">      tmp            临时,不备份,不缓存,重新启动iPhone,会自动清空 </div><div class="line">     */  </div><div class="line"> </div><div class="line">      <span class="comment">//要把下载下来的文件,从tmp文件夹拷贝到cache文件夹下</span></div><div class="line">      <span class="comment">//获取cachew文件路径</span></div><div class="line">      <span class="keyword">let</span> path = <span class="type">NSSearchPathForDirectoriesInDomains</span>(.<span class="type">CachesDirectory</span>, .<span class="type">UserDomainMask</span>, <span class="literal">true</span>).lastEle</div><div class="line">      </div><div class="line">      <span class="comment">//获取下载文件的名字保存以便下面的路径拼接</span></div><div class="line">      <span class="keyword">self</span>.downloadFileName = (url?.lastPathComponent)!</div><div class="line">      </div><div class="line">      <span class="comment">// 拼接文件路径</span></div><div class="line">      <span class="keyword">let</span> filePath = path.stringByAppendingString(<span class="string">"/"</span> + <span class="keyword">self</span>.downloadFileName)</div><div class="line">      <span class="built_in">print</span>(<span class="string">"文件保存路径: <span class="subst">\(filePath)</span>"</span>)</div><div class="line"></div><div class="line">      <span class="comment">//创建文件管理器</span></div><div class="line">      <span class="comment">//这里,copyItemAtPath方法需要做异常处理</span></div><div class="line">      <span class="keyword">let</span> fileManager = <span class="type">NSFileManager</span>.defaultManager()</div><div class="line">      <span class="keyword">do</span> &#123;</div><div class="line">        <span class="keyword">try</span> fileManager.copyItemAtPath(location!.path!, toPath: filePath)</div><div class="line">      &#125; <span class="keyword">catch</span> <span class="keyword">let</span> error <span class="keyword">as</span> <span class="type">NSError</span> &#123;</div><div class="line">        <span class="comment">// 发生了错误</span></div><div class="line">        <span class="built_in">print</span>(error.localizedDescription)</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">// 4. 启动下载任务</span></div><div class="line">    downloadTask.resume()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<font color="LightCoral" size="4">后记:<br>这里只提到了我项目中用到的方法,很有很多方法很多思路可以实现,欢迎大家来讨论!</font>
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/11/30/Swift-从零开始-11-多文件下载及存到沙盒/" class="archive-article-date">
  	<time datetime="2016-11-30T01:54:11.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-11-30</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/沙盒-下载/">沙盒 下载</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-Swift-从零开始-10-判断App是否第一次打开及判断是否是新版本" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/30/Swift-从零开始-10-判断App是否第一次打开及判断是否是新版本/">Swift 从零开始 10_判断App是否第一次打开及判断是否是新版本</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-判断App是否第一次打开"><a href="#1-判断App是否第一次打开" class="headerlink" title="1.判断App是否第一次打开"></a>1.判断App是否第一次打开</h2><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//App第一次启动调用方法 :didFinishLaunchingWithOptions:</span></div><div class="line"></div><div class="line">   <span class="selector-tag">if</span> (!NSUserDefaults.standardUserDefaults().boolForKey(<span class="string">"firstLaunch"</span>)) &#123;</div><div class="line">   </div><div class="line">     <span class="selector-tag">NSUserDefaults</span><span class="selector-class">.standardUserDefaults</span>()<span class="selector-class">.setBool</span>(true, <span class="attribute">forKey</span>: <span class="string">"firstLaunch"</span>)</div><div class="line">     <span class="selector-tag">print</span>(<span class="string">"App第一次打开"</span>)</div><div class="line">     </div><div class="line">     &#125;<span class="selector-tag">else</span>&#123;</div><div class="line">     </div><div class="line">     <span class="selector-tag">print</span>(<span class="string">"App不是第一次打开"</span>)</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<h2 id="2-判断App版本是否是新版本-OC"><a href="#2-判断App版本是否是新版本-OC" class="headerlink" title="2.判断App版本是否是新版本(OC)"></a>2.判断App版本是否是新版本(OC)</h2><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#pragma mark - 判断是不是新版本,是否需要显示新特性</span></div><div class="line">- (<span class="built_in">BOOL</span>)isNewVision &#123;</div><div class="line">    <span class="comment">// MARK: - 目标：第一次启动这个应用时，显示新特性界面，以后就直接进入主程序！</span></div><div class="line">    <span class="comment">// 版本号：两个版本号。Info.plist中有对应的版本号</span></div><div class="line">    <span class="comment">// 1. 获取应用当前的版本号</span></div><div class="line">    <span class="comment">// 获取Info.plist文件的所有信息</span></div><div class="line">    <span class="built_in">NSDictionary</span> *infoDict = [<span class="built_in">NSBundle</span> mainBundle].infoDictionary;</div><div class="line">    <span class="comment">// 获取当前版本号</span></div><div class="line">    <span class="built_in">NSString</span> *currentBete = infoDict[<span class="string">@"CFBundleShortVersionString"</span>];</div><div class="line">    </div><div class="line">    <span class="comment">// 2. 获取之前存储的版本号</span></div><div class="line">    <span class="comment">// 获取偏好设置对象</span></div><div class="line">    <span class="built_in">NSUserDefaults</span> *defaults = [<span class="built_in">NSUserDefaults</span> standardUserDefaults];</div><div class="line">    <span class="built_in">NSString</span> *oldBete = [defaults objectForKey:<span class="string">@"app_version"</span>];</div><div class="line">    </div><div class="line">    <span class="comment">// 3. 比较新旧版本号</span></div><div class="line">    <span class="keyword">if</span> ([currentBete isEqualToString:oldBete])</div><div class="line">    &#123;</div><div class="line">        <span class="comment">//如果新旧版本号相等,直接进入主程序</span></div><div class="line">        <span class="keyword">return</span> <span class="literal">NO</span>;</div><div class="line">    &#125;<span class="keyword">else</span> &#123;</div><div class="line">        <span class="comment">//如果不相等</span></div><div class="line">        <span class="comment">//获取偏好设置</span></div><div class="line">        <span class="built_in">NSUserDefaults</span> *defaults = [<span class="built_in">NSUserDefaults</span> standardUserDefaults];</div><div class="line">        <span class="comment">//存储</span></div><div class="line">        [defaults setObject:currentBete forKey:<span class="string">@"app_version"</span>];</div><div class="line">        <span class="comment">//立即同步</span></div><div class="line">        [defaults synchronize];</div><div class="line">        <span class="keyword">return</span> <span class="literal">YES</span>;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    didFinishLaunchingWithOptions:</div><div class="line">    <span class="comment">//设置根控制器(DXGuideController:新特性)</span></div><div class="line">    <span class="keyword">if</span> ([<span class="keyword">self</span> isNewVision]) &#123;</div><div class="line">        <span class="keyword">self</span>.window.rootViewController = [[DXGuideController alloc] init];</div><div class="line">    &#125;<span class="keyword">else</span> &#123;</div><div class="line">         <span class="keyword">self</span>.window.rootViewController = tabBarVC;</div></pre></td></tr></table></figure>
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/11/30/Swift-从零开始-10-判断App是否第一次打开及判断是否是新版本/" class="archive-article-date">
  	<time datetime="2016-11-30T01:26:12.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-11-30</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/App启动/">App启动</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-Swift-从零开始-09_as,as!,as?" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/22/Swift-从零开始-09_as,as!,as?/">Swift 从零开始 09_as,as!,as? 三种类型转换操作符使用详解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <font color="orangered" size="3">这里总结了下 as、as!、as? 这三种类型转换操作符的异同，以及各自的使用场景。</font>

<h3 id="1-as使用场合"><a href="#1-as使用场合" class="headerlink" title="1.as使用场合"></a>1.as使用场合</h3><p>摘自中文api的话：仅当一个值的类型在运行时（runtime）和as模式右边的指定类型一致或者是该类型的子类的情况下，才会匹配这个值。如果匹配成功，被匹配的值的类型被转换成as模式左边指定的模式。</p>
<p>首先是运行时就不多说了，重要的是 as 应用条件有2种情况： </p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>，和 <span class="string">"as"</span> 右边类型一致</div><div class="line"><span class="number">2</span>，是右边类型的子类（这种情况在Java里叫向上转型）</div></pre></td></tr></table></figure>
<p>示例代码:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">claa Animal &#123;&#125;</div><div class="line"><span class="keyword">class</span> <span class="title">Dog</span>: <span class="title">Animal</span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> a = Animal()</div><div class="line">a <span class="keyword">as</span> Animal    <span class="comment">// a和右边Animal类型一致,编译成功</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> d = Dog()</div><div class="line">d <span class="keyword">as</span> Animal    <span class="comment">// d是右边Animal的子类,编译成功</span></div></pre></td></tr></table></figure>
<p><font color="orangered" size="3">少数用法:</font><br><br>(1) 消除二义性,,数值类型转换</p>
<figure class="highlight zephir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> num1 = <span class="number">42</span> <span class="keyword">as</span> CGFloat</div><div class="line"><span class="keyword">let</span> num2 = <span class="number">42</span> <span class="keyword">as</span> <span class="keyword">Int</span></div><div class="line"><span class="keyword">let</span> num3 = <span class="number">42.5</span> <span class="keyword">as</span> <span class="keyword">Int</span></div><div class="line"><span class="keyword">let</span> num4 = (<span class="number">42</span> / <span class="number">2</span>) <span class="keyword">as</span> <span class="keyword">Double</span></div></pre></td></tr></table></figure>
<p>(2) switch语句中进行模式匹配<br>如果不知道一个对象是什么类型，你可以通过switch语法检测它的类型，并且尝试在不同的情况下使用对应的类型进行相应的处理。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">switch</span> animal &#123;</div><div class="line">	<span class="keyword">case</span> <span class="keyword">let</span> cat <span class="keyword">as</span> <span class="type">Cat</span>:</div><div class="line">    	<span class="built_in">print</span>(<span class="string">"如果是Cat类型对象，则做相应处理"</span>)</div><div class="line">	<span class="keyword">case</span> <span class="keyword">let</span> dog <span class="keyword">as</span> <span class="type">Dog</span>:</div><div class="line">    	<span class="built_in">print</span>(<span class="string">"如果是Dog类型对象，则做相应处理"</span>)</div><div class="line">	<span class="keyword">default</span>: <span class="keyword">break</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="2-as-适用场合"><a href="#2-as-适用场合" class="headerlink" title="2.as!适用场合"></a>2.as!适用场合</h3><p>上例中 第二种情况，左边是右边类型的子类,如果碰到 as 左边类型是右边类型的父类则会报错！（as不可以用于父类转子类，用java话说，不支持向下转型），由此可用as！(强转) ,如果转换失败会报 runtime 运行错误。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> <span class="title">Animal</span> &#123;&#125;</div><div class="line"><span class="keyword">class</span> <span class="title">Dog</span>: <span class="title">Animal</span> &#123;&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> a: Animal = Dog()</div><div class="line"></div><div class="line">a <span class="keyword">as</span>! Dog		<span class="comment">//编译成功</span></div><div class="line">a <span class="keyword">as</span> Dog		<span class="comment">//报错 -- 编译器也会提示你用as！, as！强转如果类型不符合会报错。</span></div></pre></td></tr></table></figure>
<h3 id="3-as-适用场合"><a href="#3-as-适用场合" class="headerlink" title="3.as?适用场合"></a>3.as?适用场合</h3><p>as? 和 as! 操作符的转换规则完全一样。但 as? 如果转换不成功的时候便会返回一个 nil 对象。成功的话返回可选类型值（optional），需要我们拆包使用。<br>由于 as? 在转换失败的时候也不会出现错误，所以对于如果能确保100%会成功的转换则可使用 as!，否则使用 as?</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> anima<span class="variable">l:Animal</span> = Cat()</div><div class="line"> </div><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> <span class="keyword">cat</span> = animal <span class="keyword">as</span>? Cat &#123;</div><div class="line">    <span class="keyword">print</span>(<span class="string">"cat is not nil"</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">print</span>(<span class="string">"cat is nil"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>: <span class="type">Animal &#123;&#125;</span></span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>: <span class="type">Animal &#123;&#125;</span></span></div><div class="line"></div><div class="line">let animal: Animal = Cat()</div><div class="line">animal <span class="keyword">as</span>? Dog	<span class="comment">//取到的是nil</span></div><div class="line">animal <span class="keyword">as</span>! Dog	<span class="comment">//运行时报错</span></div></pre></td></tr></table></figure>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/11/22/Swift-从零开始-09_as,as!,as?/" class="archive-article-date">
  	<time datetime="2016-11-22T03:05:41.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-11-22</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/as关键字/">as关键字</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-Swift-从零开始-08-新的访问控制fileprivate和open" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/22/Swift-从零开始-08-新的访问控制fileprivate和open/">Swift 从零开始 08_Swift3.0必看:新的访问控制fileprivate和open</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在swift 3中新增加了两种访问控制权限 fileprivate和 open。下面将对这两种新增访问控制做详细介绍。</p>
<h2 id="fileprivate"><a href="#fileprivate" class="headerlink" title="fileprivate"></a>fileprivate</h2><p>在原有的swift中的 private其实并不是真正的私有，如果一个变量定义为private，在同一个文件中的其他类依然是可以访问到的。这个场景在使用extension的时候很明显。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">var</span> name = <span class="string">"private"</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">User</span></span>&#123;</div><div class="line">    <span class="keyword">var</span> accessPrivate: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> name</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这样带来了两个问题：</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span>当我们标记为private时，意为真的私有还是文件内可共享呢？</div><div class="line"><span class="number">2.</span>当我们如果意图为真正的私有时，必须保证这个类或者结构体在一个单独的文件里。否则可能同文件里其他的代码访问到。</div></pre></td></tr></table></figure>
<p>由此，在swift 3中，新增加了一个 fileprivate来显式的表明，这个元素的访问权限为文件内私有。过去的private对应现在的fileprivate。现在的private则是真正的私有，离开了这个类或者结构体的作用域外面就无法访问。</p>
<h2 id="open"><a href="#open" class="headerlink" title="open"></a>open</h2><p>open则是弥补public语义上的不足。<br>现在的pubic有两层含义：</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">这个元素可以在其他作用域被访问</div><div class="line">这个元素可以在其他作用域被继承或者<span class="keyword">override</span></div></pre></td></tr></table></figure>
<p>继承是一件危险的事情。尤其对于一个framework或者module的设计者而言。在自身的module内，类或者属性对于作者而言是清晰的，能否被继承或者override都是可控的。但是对于使用它的人，作者有时会希望传达出这个类或者属性不应该被继承或者修改。这个对应的就是 final。</p>
<p>final的问题在于在标记之后，在任何地方都不能override。而对于lib的设计者而言，希望得到的是在module内可以被override，在被import到其他地方后其他用户使用的时候不能被override。</p>
<p>这就是 open产生的初衷。通过open和public标记区别一个元素在其他module中是只能被访问还是可以被override。</p>
<h3 id="下面是例子"><a href="#下面是例子" class="headerlink" title="下面是例子"></a>下面是例子</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// ModuleA:</span></div><div class="line"></div><div class="line"><span class="comment">// 这个类在ModuleA的范围外是不能被继承的，只能被访问</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NonSubclassableParentClass</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">()</span></span> &#123;&#125;</div><div class="line"></div><div class="line">    <span class="comment">// 这是错误的写法，因为class已经不能被继承，</span></div><div class="line">    <span class="comment">// 所以他的方法的访问权限不能大于类的访问权限</span></div><div class="line">    open <span class="function"><span class="keyword">func</span> <span class="title">bar</span><span class="params">()</span></span> &#123;&#125;</div><div class="line"></div><div class="line">    <span class="comment">// final的含义保持不变</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">func</span> <span class="title">baz</span><span class="params">()</span></span> &#123;&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 在ModuleA的范围外可以被继承</span></div><div class="line">open <span class="class"><span class="keyword">class</span> <span class="title">SubclassableParentClass</span> </span>&#123;</div><div class="line">    <span class="comment">// 这个属性在ModuleA的范围外不能被override</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">var</span> size : <span class="type">Int</span></div><div class="line"></div><div class="line">    <span class="comment">// 这个方法在ModuleA的范围外不能被override</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">()</span></span> &#123;&#125;</div><div class="line"></div><div class="line">    <span class="comment">// 这个方法在任何地方都可以被override</span></div><div class="line">    open <span class="function"><span class="keyword">func</span> <span class="title">bar</span><span class="params">()</span></span> &#123;&#125;</div><div class="line"></div><div class="line">    <span class="comment">///final的含义保持不变</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">func</span> <span class="title">baz</span><span class="params">()</span></span> &#123;&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/// final的含义保持不变</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">FinalClass</span> </span>&#123; &#125;</div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// ModuleB:</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> ModuleA</div><div class="line"></div><div class="line"><span class="comment">// 这个写法是错误的，编译会失败</span></div><div class="line"><span class="comment">// 因为NonSubclassableParentClass类访问权限标记的是public，只能被访问不能被继承</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubclassA</span> : <span class="title">NonSubclassableParentClass</span> </span>&#123; &#125;</div><div class="line"></div><div class="line"><span class="comment">// 这样写法可以通过，因为SubclassableParentClass访问权限为 `open`.</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubclassB</span> : <span class="title">SubclassableParentClass</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">// 这样写也会编译失败</span></div><div class="line">    <span class="comment">// 因为这个方法在SubclassableParentClass 中的权限为public，不是`open'.</span></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">()</span></span> &#123; &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 这个方法因为在SubclassableParentClass中标记为open，所以可以这样写</span></div><div class="line">    <span class="comment">// 这里不需要再声明为open，因为这个类是internal的</span></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">bar</span><span class="params">()</span></span> &#123; &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">open <span class="class"><span class="keyword">class</span> <span class="title">SubclassC</span> : <span class="title">SubclassableParentClass</span> </span>&#123;</div><div class="line">    <span class="comment">// 这种写法会编译失败，因为这个类已经标记为open</span></div><div class="line">    <span class="comment">// 这个方法override是一个open的方法，则也需要表明访问权限</span></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">bar</span><span class="params">()</span></span> &#123; &#125; </div><div class="line">&#125;</div><div class="line"></div><div class="line">open <span class="class"><span class="keyword">class</span> <span class="title">SubclassD</span> : <span class="title">SubclassableParentClass</span> </span>&#123;</div><div class="line">    <span class="comment">// 正确的写法，方法也需要标记为open</span></div><div class="line">    open <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">bar</span><span class="params">()</span></span> &#123; &#125;    </div><div class="line">&#125;</div><div class="line"></div><div class="line">open <span class="class"><span class="keyword">class</span> <span class="title">SubclassE</span> : <span class="title">SubclassableParentClass</span> </span>&#123;</div><div class="line">    <span class="comment">// 也可以显式的指出这个方法不能在被override</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">bar</span><span class="params">()</span></span> &#123; &#125;    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>现在的访问权限则依次为：open，public，internal，fileprivate，private。<br>有的人会觉得访问权限选择的增加加大了语言的复杂度。但是如果我们思考swift语言的设计目标之一就是一门安全的语言（“Designed for Safety”）就能理解这次的改动。更加明确清晰的访问权限控制可以使程序员表达出更准确的意图，当然也迫使在编码时思考的更加深入。</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/11/22/Swift-从零开始-08-新的访问控制fileprivate和open/" class="archive-article-date">
  	<time datetime="2016-11-22T02:41:10.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-11-22</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift3-0/">swift3.0</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-Swift-从零开始-07-swift中的关键字说明" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/21/Swift-从零开始-07-swift中的关键字说明/">Swift 从零开始 07_swift中的关键字说明(一)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-let关键字"><a href="#1-let关键字" class="headerlink" title="1.let关键字"></a>1.let关键字</h2><p>用let修饰的变量会是一个不可变的常量, 也就是说不可以对它进行修改, 但如果用let修饰的常量是一个类, 那么我们可以对其所在的属性进行修改, 比如:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">class PersonInfo &#123;</div><div class="line">    let name = <span class="string">"xiaoming"</span></div><div class="line">    <span class="selector-tag">var</span> age = <span class="number">18</span></div><div class="line">    <span class="selector-tag">var</span> <span class="attribute">height</span> = <span class="number">170</span></div><div class="line">    <span class="selector-tag">var</span> weight = <span class="number">65</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">let personInfo = PersonInfo()</div><div class="line"></div><div class="line">personInfo<span class="selector-class">.age</span> += <span class="number">1</span></div><div class="line"></div><div class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">"person age is \(personInfo.age)."</span>)</span></span></div><div class="line"><span class="comment">// 输出的结果为: person age is 19.</span></div></pre></td></tr></table></figure>
<p>这里边的name就是不可变的, 如果非要去改变, Xcode会建议你把let修改成var.</p>
<p>PS: 如果这个时候, 再声明一个person常量去引用personInfo, 那么person的所指向的内存块是和personInfo相同的.</p>
<h2 id="2-var关键字"><a href="#2-var关键字" class="headerlink" title="2.var关键字"></a>2.var关键字</h2><p>用var关键字声明的变量将会是一个可变的变量, 在这里, 我们并不会用var去引用一个类, 也没有必要, 继续拿上面的例子来说:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">class PersonInfo &#123;</div><div class="line">    let name = <span class="string">"xiaoming"</span></div><div class="line">    <span class="selector-tag">var</span> age = <span class="number">18</span></div><div class="line">    <span class="selector-tag">var</span> <span class="attribute">height</span> = <span class="number">170</span></div><div class="line">    <span class="selector-tag">var</span> weight = <span class="number">65</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">let personInfo = PersonInfo()</div><div class="line"></div><div class="line">personInfo<span class="selector-class">.age</span> += <span class="number">1</span></div><div class="line"></div><div class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">"person age is \(personInfo.age)."</span>)</span></span></div></pre></td></tr></table></figure>
<p>这里面的age就是属于var类型, 在初始化之后, 我们仍然可以给它进行修改.</p>
<p>PS: 如果这个时候, 我们用var修饰personMode变量去引用personInfo, 那么personMode和personInfo所指向的内存块并不同, personMode会将personInfo完整的拷贝一份, 然后放在另外一块内存块去管理.</p>
<h2 id="3-class关键字"><a href="#3-class关键字" class="headerlink" title="3.class关键字"></a>3.class关键字</h2><p>在Swift当中, 我们是使用Class关键字去声明一个类, 比如:</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">PersonInfo</span> &#123;</span></div><div class="line">    <span class="regexp">//</span> <span class="class"><span class="keyword">class</span> <span class="title">body</span></span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="4-struct关键字"><a href="#4-struct关键字" class="headerlink" title="4.struct关键字"></a>4.struct关键字</h2><p>在Swift中, 如果我们需要声明一个结构体, 我们就需要使用到struct关键字, 比如:</p>
<figure class="highlight capnproto"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">PersonInfo</span> </span>&#123;</div><div class="line">    // <span class="class"><span class="keyword">struct</span> <span class="title">body</span></span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="5-enum关键字"><a href="#5-enum关键字" class="headerlink" title="5.enum关键字"></a>5.enum关键字</h2><p>而我们需要声明枚举的时候, 我们就使用enum关键字, 比如:</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">PersonMode</span> &#123;</span></div><div class="line">    <span class="keyword">case</span> zhangsan</div><div class="line">    <span class="keyword">case</span> lisi</div><div class="line">    <span class="keyword">case</span> wangwu(String)</div><div class="line">    <span class="keyword">case</span> luoliu(String, Double, Int)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在Swift当中的enum和Objective-C并不一样, Swift的enum不会被隐式赋值为0, 1, 里面的zhangsan就是这个枚举分支的完整值, 并且在Swift中, 我们可以给enum case声明各种类型, 比如里面的case luoliu一样.</p>
<p>当然, 我们也可以给枚举值默认声明一个值, 但在枚举名之前, 要声明是什么类型, 比如:</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Numbers</span>: <span class="title">Int</span> &#123;</span></div><div class="line">    <span class="keyword">case</span> One = <span class="number">1</span>, Two, Three, Four</div><div class="line">&#125;</div><div class="line"></div><div class="line">let number = Numbers.One.rawValue</div><div class="line"></div><div class="line">print(number)</div></pre></td></tr></table></figure>
<h2 id="6-override关键字"><a href="#6-override关键字" class="headerlink" title="6.override关键字"></a>6.override关键字</h2><p>在Swift中, 如果我们要重写某个方法, 或者某个属性的话, 我们需要在重写的变量前增加一个override关键字, 比如:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> speed: <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">200</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">carSpeed</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Car max speed is <span class="subst">\(speed)</span>km 1 hours."</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewCar</span>: <span class="title">Car</span> </span>&#123;</div><div class="line">    <span class="keyword">override</span> <span class="keyword">var</span> speed: <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">150</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">carSpeed</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Car max speed is <span class="subst">\(speed)</span>km 1 hours."</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="7-final关键字"><a href="#7-final关键字" class="headerlink" title="7.final关键字"></a>7.final关键字</h2><p>上面我们介绍了override重写属性或者方法的关键字, 当然有重写, 肯定会有防止重写的关键字, 比如:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> speed: <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">200</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">final</span> <span class="keyword">var</span> carType: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"SUV"</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">carSpeed</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Car max speed is <span class="subst">\(speed)</span>km 1 hours."</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewCar</span>: <span class="title">Car</span> </span>&#123;</div><div class="line">    <span class="keyword">override</span> <span class="keyword">var</span> speed: <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">150</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">carSpeed</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Car max speed is <span class="subst">\(speed)</span>km 1 hours."</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">override</span> <span class="keyword">var</span> carType: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"MPV"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 这个时候, 下面这个override var carType: String&#123;&#125;属性就会报Var override a "final" var 的错误.</span></div></pre></td></tr></table></figure>
<h2 id="8-subscript关键字"><a href="#8-subscript关键字" class="headerlink" title="8.subscript关键字"></a>8.subscript关键字</h2><p>所谓的下标, 其实就可以快捷方式的设置或者获取对应的属性, 而不需要调用对应的方法去获取或者存储, 比如:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Animal</span></span> &#123;</div><div class="line">    <span class="keyword">let</span> catType: <span class="built_in">String</span></div><div class="line"></div><div class="line">    subscript(animalName: <span class="built_in">String</span>) -&gt; <span class="built_in">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"catType is \(animalName)."</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> tiger = Animal(catType: <span class="string">"Tiger"</span>)</div><div class="line"></div><div class="line">print(tiger)</div><div class="line"><span class="comment">// 输出的结果为: Animal(catType: "Tiger")</span></div></pre></td></tr></table></figure>
<h2 id="9-mutating关键字"><a href="#9-mutating关键字" class="headerlink" title="9.mutating关键字"></a>9.mutating关键字</h2><p>作用:写在func前面,以便于让func可以修改struct和protocol的extension中的成员的值。 如果func前面不加mutating,struct和protocol的extension中的成员的值便被保护起来,不能修改.<br><br>mutating这个关键字指的是可变, <font color="orangered">只能用在struct和enum当中,</font>为的就是可以方便我们在特定环境下, 需要在struct中修改对应的属性值, 比如:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Animal</span></span> &#123;</div><div class="line">    <span class="keyword">let</span> catType: <span class="built_in">String</span></div><div class="line"></div><div class="line">    subscript(animalName: <span class="built_in">String</span>) -&gt; <span class="built_in">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"catType is \(animalName)."</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> tiger = Animal(catType: <span class="string">"Tiger"</span>)</div><div class="line"></div><div class="line">print(tiger)</div><div class="line"><span class="comment">// 输出的结果为: Animal(catType: "Tiger")</span></div></pre></td></tr></table></figure>
<h2 id="10-static"><a href="#10-static" class="headerlink" title="10.static"></a>10.static</h2><p>用static修饰的变量或者方法, 就会变成静态变量和静态方法, 并且保证在对应的作用域当中只有一份, 同时也不需要依赖实例化, 比如:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animals</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> catName: <span class="type">String</span>!</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">catTypeName</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="number">_</span> = <span class="string">"Tiger"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="type">Animals</span>.catName = <span class="string">"Tiger"</span></div><div class="line"></div><div class="line"><span class="built_in">print</span>(<span class="type">Animals</span>.catName)</div><div class="line"></div><div class="line"><span class="comment">// 输出的结果为: Tiger</span></div></pre></td></tr></table></figure>
<font color="orangered" size="3">static关键字和class关键字的区别</font>

<p>在方法的func关键字之前加上关键字static或者class都可以用于指定类方法.<br>不同的是用class关键字指定的类方法可以被子类重写, 如下:<br>    override class func work() {<br>    print(“Teacher: University Teacher”)<br>}</p>
<p>但是用static关键字指定的类方法是不能被子类重写的, 根据报错信息: Class method overrides a ‘final’ class method.<br>我们可以知道被static指定的类方法包含final关键字的特性–防止被重写. </p>
<h2 id="11-lazy关键字"><a href="#11-lazy关键字" class="headerlink" title="11.lazy关键字"></a>11.lazy关键字</h2><p>就是swift中的懒加载<br><br>被lazy关键修饰的变量, 只有在第一次被调用的时候才会去计算它初始化值的属性, 比如:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">class SuvCar &#123;</div><div class="line">    <span class="selector-tag">var</span> BydSuv = <span class="string">"S7"</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">class MpvCar  &#123;</div><div class="line">    lazy <span class="selector-tag">var</span> suvCar = SuvCar()</div><div class="line">    <span class="selector-tag">var</span> mpvCars = [String]()</div><div class="line">&#125;</div><div class="line"></div><div class="line">let mpvCar = MpvCar()</div><div class="line"></div><div class="line">mpvCar<span class="selector-class">.mpvCars</span><span class="selector-class">.append</span>(<span class="string">"CarOne"</span>)</div><div class="line">mpvCar<span class="selector-class">.mpvCars</span><span class="selector-class">.append</span>(<span class="string">"CarTwo"</span>)</div><div class="line"></div><div class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">"I have \(mpvCar.mpvCars.count) MPV."</span>)</span></span></div><div class="line"><span class="comment">// 输出的结果为: I have 2 MPV.</span></div><div class="line"></div><div class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">"I have a SUV Car, is \(mpvCar.suvCar.BydSuv)"</span>)</span></span></div><div class="line"><span class="comment">// 输出的结果为: I have a SUV Car, is S7</span></div></pre></td></tr></table></figure>
<p><font color="orangered" size="3">在这里需要注意两点:</font><br><br><br>1.用lazy修饰的变量必须是用var声明的, 因为属性的初始值可能在实例构造完成之后才会得到。而常量属性在构造过程完成之前必须要有初始值，因此无法声明成延迟属性。</p>
<p>2.如果被lazy修饰的变量没有在初始化时就被多个线程调用, 那就没有办法保证它只被初始化一次了.</p>
<h2 id="12-init关键字"><a href="#12-init关键字" class="headerlink" title="12.init关键字"></a>12.init关键字</h2><p>在Swift 中也有对应的构造器, 来看看:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Player</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> coinsInPurse: <span class="built_in">Int</span></div><div class="line"></div><div class="line">    init(coins: <span class="built_in">Int</span>) &#123;</div><div class="line">        coinsInPurse = <span class="number">1000</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这样子coinsInPurse的值就为1000了.</p>
<p>还有一种用法, 就是在init后面加个”?”号, 表明该构造器可以允许失败</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Animal</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> species: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>?(species: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">if</span> species.isEmpty &#123; <span class="keyword">return</span> <span class="literal">nil</span> &#125;</div><div class="line">        <span class="keyword">self</span>.species = species</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> someCreature = <span class="type">Animal</span>(species: <span class="string">"Giraffe"</span>)</div><div class="line"></div><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> giraffe = someCreature &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"An animal was initialized with a species of <span class="subst">\(giraffe.species)</span>"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> anonymousCreature = <span class="type">Animal</span>(species: <span class="string">""</span>)</div><div class="line"></div><div class="line"><span class="keyword">if</span> anonymousCreature == <span class="literal">nil</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"The anonymous creature could not be initialized"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="13-convenient关键字"><a href="#13-convenient关键字" class="headerlink" title="13.convenient关键字"></a>13.convenient关键字</h2><p>该关键字是用来修饰init的, 经过convenient修饰的init方法, 表明该init方式是比较次要, 辅助型的, 比如:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Food</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">convenience</span> <span class="keyword">init</span>() &#123;</div><div class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(name: <span class="string">"[Unnamed]"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="14-required关键字"><a href="#14-required关键字" class="headerlink" title="14.required关键字"></a>14.required关键字</h2><p>required也是用来修饰init方法的, 用required修饰说明该构造方法是必须实现的, 比如:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span> </span>&#123;</div><div class="line">    <span class="keyword">required</span> <span class="keyword">init</span>() &#123;</div><div class="line">        <span class="comment">// init body</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>PS: 如果一个子类继承了父类required修饰的init方法, 就必须得去实现该init方法, 但子类可以觉得它之后继承于它的子类可以实现该方法.</p>
<h2 id="15-deinit关键字"><a href="#15-deinit关键字" class="headerlink" title="15.deinit关键字"></a>15.deinit关键字</h2><p>在Swift中, 有一个类似dealloc方法, 就是deinit, 但有一些区别, dealloc方法是在引用计数为0的时候, 也就是被释放的时候才会调用, 而deinit是在实例不再引用时自动调用, 并且不用手动去管理引用计数, 比如:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bank</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> coinsInBank = <span class="number">10_000</span></div><div class="line"></div><div class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">vendCoins</span><span class="params">(<span class="keyword">var</span> numberOfConisToVend: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        numberOfConisToVend = <span class="built_in">min</span>(numberOfConisToVend, coinsInBank)</div><div class="line"></div><div class="line">        coinsInBank -= numberOfConisToVend</div><div class="line"></div><div class="line">        <span class="keyword">return</span> numberOfConisToVend</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">receiveCoins</span><span class="params">(coins: Int)</span></span> &#123;</div><div class="line">        <span class="comment">//print("coinsInBank = \(coinsInBank)")</span></div><div class="line"></div><div class="line">        coinsInBank += coins</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Player</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> coinsInPurse: <span class="type">Int</span></div><div class="line"></div><div class="line">    <span class="keyword">init</span>(coins: <span class="type">Int</span>) &#123;</div><div class="line">        coinsInPurse = <span class="type">Bank</span>.vendCoins(coins)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">winCoins</span><span class="params">(coins: Int)</span></span> &#123;</div><div class="line">        coinsInPurse += <span class="type">Bank</span>.vendCoins(coins)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">deinit</span> &#123;</div><div class="line">        <span class="type">Bank</span>.receiveCoins(coinsInPurse)</div><div class="line"></div><div class="line">        <span class="built_in">print</span>(<span class="string">"Player is nil."</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> playerOne: <span class="type">Player</span>? = <span class="type">Player</span>(coins: <span class="number">100</span>)</div><div class="line"></div><div class="line"><span class="built_in">print</span>(<span class="string">"A new player has joined the game with <span class="subst">\(playerOne!.coinsInPurse)</span> coins."</span>)</div><div class="line"><span class="comment">// 输出的结果为: A new player has joined the game with 100 coins</span></div><div class="line"></div><div class="line"><span class="built_in">print</span>(<span class="string">"There are now <span class="subst">\(Bank.coinsInBank)</span> coins left in the bank."</span>)</div><div class="line"><span class="comment">// 输出的结果为: There are now 9900 coins left in the bank.</span></div><div class="line"></div><div class="line">playerOne?.winCoins(<span class="number">2_000</span>)</div><div class="line"></div><div class="line"><span class="built_in">print</span>(<span class="string">"PlayerOne wn 2000 coins &amp; now has <span class="subst">\(playerOne!.coinsInPurse)</span> coins."</span>)</div><div class="line"><span class="comment">// 输出的结果为: PlayerOne wn 2000 coins &amp; now has 2100 coins.</span></div><div class="line"></div><div class="line"><span class="built_in">print</span>(<span class="string">"The bank now only has <span class="subst">\(Bank.coinsInBank)</span> coins left."</span>)</div><div class="line"><span class="comment">// 输出的结果为: The bank now only has 7900 coins left.</span></div><div class="line"></div><div class="line">playerOne = <span class="literal">nil</span></div><div class="line"><span class="comment">// 这个时候就会去调用deinit方法, 输出Player is nil.</span></div></pre></td></tr></table></figure>
<h2 id="16-is关键字"><a href="#16-is关键字" class="headerlink" title="16.is关键字"></a>16.is关键字</h2><p>在Swift中, is关键字是用来判断类型所使用的, 比如:</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> <span class="keyword">number</span> = [<span class="string">"xiaoming"</span>, <span class="number">18</span>]</div><div class="line"></div><div class="line"><span class="keyword">for</span> item in <span class="keyword">number</span> &#123;</div><div class="line">    <span class="keyword">if</span> item <span class="keyword">is</span> Int &#123;</div><div class="line">        <span class="keyword">print</span>(<span class="string">"item is Int type."</span>)</div><div class="line"></div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> item <span class="keyword">is</span> String &#123;</div><div class="line">        <span class="keyword">print</span>(<span class="string">"item is String type"</span>)</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// 输出的结果为: </div><div class="line">// item <span class="keyword">is</span> String <span class="built_in">type</span>.</div><div class="line">// item <span class="keyword">is</span> Int <span class="built_in">type</span>.</div></pre></td></tr></table></figure>
<p>我们可以遍历一个[NSObject]类型的数组, 判断里面各元素的类型</p>
<h2 id="17-throw-do-catch关键字"><a href="#17-throw-do-catch关键字" class="headerlink" title="17.throw,do-catch关键字"></a>17.throw,do-catch关键字</h2><p>在Swift 2.0之前, Swift是没有自带的错误信息处理方法, 在2.0更新之后就有了错误信息的处理方法, 让我们来看看.</p>
<p>在这里我们会使用到一个新的语句do-catch, 这个语句和Switch-case有些类似, 但唯独有一点不太一样的就是, 在do-catch语句中需要使用到try关键字, 而Switch-case则不需要, 好了, 下面让我们来看看.</p>
<p>首先我们需要定义一个ErrorType的枚举</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">getError</span>: <span class="title">ErrorType</span> &#123;</span></div><div class="line">    <span class="keyword">case</span> ErrorOne</div><div class="line">    <span class="keyword">case</span> ErrorTwo</div><div class="line">    <span class="keyword">case</span> ErrorThree</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后我们来写一个方法, 用来获取错误类型</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">doDangerousStuff</span><span class="params">()</span></span> <span class="keyword">throws</span> &#123;</div><div class="line"></div><div class="line">    <span class="keyword">throw</span> getError.<span class="type">ErrorOne</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>最后我们使用do-catch语句来获取对应的错误类型</p>
<figure class="highlight puppet"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">do</span> &#123;</div><div class="line">    try doDangerousStuff()</div><div class="line"></div><div class="line">&#125; <span class="keyword">catch</span> <span class="keyword">getError</span>.<span class="keyword">ErrorOne</span> &#123;</div><div class="line"></div><div class="line">    print(getError.ErrorOne)</div><div class="line">&#125; <span class="keyword">catch</span> <span class="keyword">getError</span>.<span class="keyword">ErrorTwo</span> &#123;</div><div class="line"></div><div class="line">    print(getError.ErrorTwo)</div><div class="line">&#125; <span class="keyword">catch</span> <span class="keyword">getError</span>.<span class="keyword">ErrorThree</span> &#123;</div><div class="line"></div><div class="line">    print(getError.ErrorThree)</div><div class="line">&#125;</div><div class="line">//输出结果为: ErrorOne</div></pre></td></tr></table></figure>
<h2 id="18-extension关键字"><a href="#18-extension关键字" class="headerlink" title="18.extension关键字"></a>18.extension关键字</h2><p>extension的作用是在不改变原来的类型或者协议基础下增加新的属性或者方法, 比如:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name = <span class="string">"xiaoming"</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> age: <span class="type">Int</span> &#123; <span class="keyword">return</span> <span class="number">20</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> person = <span class="type">Person</span>()</div><div class="line"></div><div class="line"><span class="built_in">print</span>(<span class="string">"person name is <span class="subst">\(person.name)</span>, age is <span class="subst">\(person.age)</span>."</span>)</div><div class="line"></div><div class="line"><span class="comment">// 输出的结果为:</span></div><div class="line"><span class="comment">// person name is xiaoming, age is 20.</span></div></pre></td></tr></table></figure>
<h2 id="19-protocol关键字"><a href="#19-protocol关键字" class="headerlink" title="19.protocol关键字"></a>19.protocol关键字</h2><p>protocol关键字在Swift中也是属于协议的意思, 所谓的协议就是约束对象, 比如:</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">protocol Person &#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="built_in">String</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">    <span class="keyword">var</span> age: <span class="built_in">String</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Xiaoming</span>: <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="built_in">String</span> &#123; <span class="keyword">return</span> <span class="string">"xiaoming"</span> &#125;</div><div class="line">    <span class="keyword">var</span> age: <span class="built_in">String</span> &#123; <span class="keyword">return</span> <span class="string">"20"</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Laozhang</span>: <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="built_in">String</span></div><div class="line">    <span class="keyword">var</span> age: <span class="built_in">String</span></div><div class="line"></div><div class="line">    init(name: <span class="built_in">String</span>, age: <span class="built_in">String</span>) &#123;</div><div class="line">        self.name = name</div><div class="line">        self.age = age</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="20-public关键字"><a href="#20-public关键字" class="headerlink" title="20.public关键字"></a>20.public关键字</h2><p>public: 指的是可以访问在一个模块内的任何实体, 也可以通过导入该模块来访问, 也就是我们经常在Objective-C中经常需要导入的.h文件中的方法, 该关键字可以用来修饰变量, 方法, 类, 枚举, 结构体等等之类, 比如:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="comment">// struct body</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">CompassPoint</span> </span>&#123;</div><div class="line">    <span class="comment">// enum body</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SomePublecClass</span> </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">var</span> somePublecVariable = <span class="number">0</span></div></pre></td></tr></table></figure>
<h2 id="21-internal关键字"><a href="#21-internal关键字" class="headerlink" title="21.internal关键字"></a>21.internal关键字</h2><p>internal: 指的是可以访问同一模块源文件中得任何实体, 但不能从模块的外部去访问该源文件中得实体, 同样, internal也可以修饰变量, 方法, 类, 枚举, 结构体等等之类等, 比如:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">internal</span> <span class="class"><span class="keyword">struct</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="comment">// struct body</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">internal</span> <span class="class"><span class="keyword">enum</span> <span class="title">CompassPoint</span> </span>&#123;</div><div class="line">    <span class="comment">// enum body</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">internal</span> <span class="class"><span class="keyword">class</span> <span class="title">SomePublecClass</span> </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="keyword">internal</span> <span class="keyword">var</span> somePublecVariable = <span class="number">0</span></div></pre></td></tr></table></figure>
<h2 id="22-private关键字"><a href="#22-private关键字" class="headerlink" title="22.private关键字"></a>22.private关键字</h2><p>private: 指的是限制实体时能在源文件内部使用, 外部不能访问, private也同样可以用来修饰变量, 方法, 类, 枚举, 结构体等等之类, 比如:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">struct</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="comment">// struct body</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">enum</span> <span class="title">CompassPoint</span> </span>&#123;</div><div class="line">    <span class="comment">// enum body</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">SomePublecClass</span> </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="keyword">var</span> somePublecVariable = <span class="number">0</span></div></pre></td></tr></table></figure>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/11/21/Swift-从零开始-07-swift中的关键字说明/" class="archive-article-date">
  	<time datetime="2016-11-21T08:13:29.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-11-21</time>
</a>
      
      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-Swift-从零开始-06_断言" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/21/Swift-从零开始-06_断言/">Swift 从零开始 06_断言</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h1><h3 id="例"><a href="#例" class="headerlink" title="例"></a>例</h3><font color="orangered">断言 : 保证某个条件一定是满足的,如果不满足,就直接崩溃,只在开发调试时有效</font>


<figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NSAssert(<span class="name">self</span>.finishedBlock != <span class="literal">nil</span>, @<span class="string">"图片下载完成的回调(finishedBlock)不能为空"</span>)<span class="comment">;</span></div></pre></td></tr></table></figure>
<p>可选类型可以让你判断值是否存在，你可以在代码中优雅地处理值缺失的情况。然而，在某些情况下，如果值缺失或者值并不满足特定的条件，你的代码可能没办法继续执行。这时，你可以在你的代码中触发一个断言（assertion）来结束代码运行并通过调试来找到值缺失的原因。</p>
<h3 id="使用断言进行调试"><a href="#使用断言进行调试" class="headerlink" title="使用断言进行调试"></a>使用断言进行调试</h3><p>断言会在运行时判断一个逻辑条件是否为true。从字面意思来说，断言“断言”一个条件是否为真。你可以使用断言来保证在运行其他代码之前，某些重要的条件已经被满足。如果条件判断为true，代码运行会继续进行；如果条件判断为false，代码运行停止，你的应用被终止。</p>
<p>如果你的代码在调试环境下触发了一个断言，比如你在 Xcode 中构建并运行一个应用，你可以清楚地看到不合法的状态发生在哪里并检查断言被触发时你的应用的状态。此外，断言允许你附加一条调试信息。</p>
<p>你可以使用全局assert函数来写一个断言。向assert函数传入一个结果为true或者false的表达式以及一条信息，当表达式为false的时候这条信息会被显示：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">let age = -<span class="number">3</span></div><div class="line"><span class="function"><span class="title">assert</span><span class="params">(age &gt;= <span class="number">0</span>, <span class="string">"A person's age cannot be less than zero"</span>)</span></span></div><div class="line"><span class="comment">// 因为 age &lt; 0，所以断言会触发</span></div></pre></td></tr></table></figure>
<p>在这个例子中，只有age &gt;= 0为true的时候，即age的值非负的时候，代码运行才会继续。如果age的值是负数，就像代码中那样，age &gt;= 0为false，断言被触发，结束应用。</p>
<p>断言信息如果不需要，可以被省略，就像这样：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">assert</span><span class="params">(age &gt;= <span class="number">0</span>)</span></span></div></pre></td></tr></table></figure>
<h3 id="何时使用断言"><a href="#何时使用断言" class="headerlink" title="何时使用断言"></a>何时使用断言</h3><p>当条件可能为假时使用断言，但是最终一定要保证条件为真，这样你的代码才能继续运行。断言的适用情景：</p>
<p>整数类型的下标索引被传入一个自定义下标脚本实现，但是下标索引值可能太小或者太大。<br>需要给函数传入一个值，但是非法的值可能导致函数不能正常执行。<br>一个可选值现在是nil，但是后面的代码运行需要一个非nil值。<br>请参考下标脚本和函数。</p>
<p>注意：<br>断言可能导致你的应用终止运行，所以你应当仔细设计你的代码来让非法条件不会出现。然而，在你的应用发布之前，有时候非法条件可能出现，这时使用断言可以快速发现问题。</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/11/21/Swift-从零开始-06_断言/" class="archive-article-date">
  	<time datetime="2016-11-21T06:28:38.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-11-21</time>
</a>
      
      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-Swift-从零开始-05_if let 与 guard" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/21/Swift-从零开始-05_if let 与 guard/">Swift 从零开始 05_if let 与 guard</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Swift控制流-如何理解-if-let-与guard"><a href="#Swift控制流-如何理解-if-let-与guard" class="headerlink" title="Swift控制流: 如何理解 if let 与guard?"></a>Swift控制流: 如何理解 if let 与guard?</h1><p>if let 和 guard 只是语法糖，没有也可以，但有了可以使得代码更简洁方便。要理解 if let 和 guard，不妨设想假如没有这两者，代码会怎么写。</p>
<h3 id="if-let"><a href="#if-let" class="headerlink" title="if let"></a>if let</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">doSomething</span><span class="params">(str: String?)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">let</span> v: <span class="type">String</span>! = str</div><div class="line">    <span class="keyword">if</span> v != <span class="literal">nil</span></div><div class="line">    &#123;</div><div class="line">        <span class="comment">// use v to do something</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Swift 中因为有optional, 经常需要判断是否为空。假如没有if let，大致写成上面的样子，有了 if let, 可以改写成:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">doSomething</span><span class="params">(str: String?)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> <span class="keyword">let</span> v = str</div><div class="line">    &#123;</div><div class="line">        <span class="comment">// use v to do something</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面两段代码的控制流是一样的。对照着，可以看出if let的写法更加简洁方便。</p>
<hr>
<h3 id="guard"><a href="#guard" class="headerlink" title="guard"></a>guard</h3><p>假如 if 中出现的代码很长，我们写代码时可以将错误情况先返回。比如：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">doSomething</span><span class="params">(str: String?)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">let</span> v: <span class="type">String</span>! = str</div><div class="line">    <span class="keyword">if</span> v == <span class="literal">nil</span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// use v to do something</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这样做可以避免过多的嵌套。上面代码实在太常见了，swift也提供一个guard这个语法糖，用guard可以改写成：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">doSomething</span><span class="params">(str: String?)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> v = str <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</div><div class="line"></div><div class="line">    <span class="comment">// use v to do something</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面两段代码的控制流是一样的。也可以看出guard的写法更加简洁方便。</p>
<h5 id="if满足条件需要return时就可以用guard，所有guard使用场景都可以用if来替代。为啥后来特意加了guard特性，那就是guard的可读性强"><a href="#if满足条件需要return时就可以用guard，所有guard使用场景都可以用if来替代。为啥后来特意加了guard特性，那就是guard的可读性强" class="headerlink" title="if满足条件需要return时就可以用guard，所有guard使用场景都可以用if来替代。为啥后来特意加了guard特性，那就是guard的可读性强"></a><font color="red">if满足条件需要return时就可以用guard，所有guard使用场景都可以用if来替代。为啥后来特意加了guard特性，那就是guard的可读性强</font></h5>
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/11/21/Swift-从零开始-05_if let 与 guard/" class="archive-article-date">
  	<time datetime="2016-11-21T06:16:11.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-11-21</time>
</a>
      
      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  


      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 陈彬
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true
	}
</script>

<script src="/./main.js"></script>



<div id="totop" style="position:fixed;bottom:150px;right:50px;cursor: pointer;">
<a title="返回顶部"><img src="/img/scrollup.png"/></a>
</div>

<script src="/js/totop.js"></script>

    
<div class="tools-col">
  <ul class="btn-wrap">
    
      <li class="chose" data-hook="tools-section-all"><span class="text">全部</span><i class="icon-book"></i></li>
    
    
      <li data-hook="tools-section-tag"><span class="text">标签</span><i class="icon-price-tags"></i></li>
    
    
    
      <li data-hook="tools-section-me"><span class="text">我</span><i class="icon-smile"></i></li>
    
  </ul>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all chose">
    	</section>
    

    
    	<section class="tools-section tools-section-tag">
    			<div class="widget tagcloud" id="js-tagcloud">
    				<a href="/tags/App启动/" style="font-size: 10px;">App启动</a> <a href="/tags/as关键字/" style="font-size: 10px;">as关键字</a> <a href="/tags/ios/" style="font-size: 10px;">ios</a> <a href="/tags/swift-h5交互/" style="font-size: 10px;">swift h5交互</a> <a href="/tags/swift3-0/" style="font-size: 10px;">swift3.0</a> <a href="/tags/沙盒-下载/" style="font-size: 10px;">沙盒 下载</a>
    			</div>
    	</section>
    

    

    
    	<section class="tools-section tools-section-me">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">波澜不惊的程序猿</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>